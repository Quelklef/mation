<!doctype html>
<html>
  <head>
    <title>Mation Samples</title>
  </head>
  <body>

<div id="sidebar">
  <h1 id="title">Mation Samples</h1>
</div>
<iframe id="iframe"></iframe>

<style>

body {
  margin: 0;
  height: 100vh;

  display: grid;
  grid-template-areas: "sidebar iframe";
  grid-template-columns: 400px 1fr;

  font-family: "sans-serif";
}

#sidebar {
  grid-area: sidebar;
  background: rgba(0, 0, 0, 0.1);
}

#iframe {
  grid-area: iframe;
  width: 100%;
  height: 100%;
  border: none;
}

#sidebar {
  display: flex;
  flex-direction: column;
  align-items: stretch;
  justify-content: flex-start;

  & > * {
    padding: 0.65rem 1.5rem;
  }

  & > h1 {
    font-size: 1.75em;
    margin: 0;
    margin-top: 0.5em;
    padding-bottom: 0;
  }

  & > h2 {
    font-size: 1.1em;
    font-weight: bold;
    margin: 0;
    margin-top: 1em;
  }

  & > a {
    cursor: pointer;
    &:hover, &.selected { background: rgba(0, 0, 0, 0.1); }
  }
}

</style>

<script>

  const sampleGroups =
    [ [ "Welcome", [ "Welcome" ] ]
    , [ "Main", [ "Main" ] ]
    , [ "Basic", [ "Counter", "AsyncApiCall", "Clock", "Styling" ] ]
    ];

  const $sidebar = document.getElementById('sidebar');
  const $iframe = document.getElementById('iframe');
  const $sampleElems = {};

  // Build sidebar
  for (const [groupName, sampleNames] of sampleGroups) {
    const $title = document.createElement('h2');
    $title.innerText = groupName;
    $sidebar.append($title);

    for (const sampleName of sampleNames) {
      const $a = document.createElement('a');
      $sampleElems[sampleName] = $a;
      $sidebar.append($a);

      $a.innerText = sampleName;
      $a.addEventListener('click', ev => {
        ev.preventDefault();
        loadSample(sampleName);
      });
    }
  }

  function loadSample(sampleName) {
    // Open the sample
    $iframe.src = `${sampleName}.html`;
    // Display <a> as selected
    for (const $a of Object.values($sampleElems)) $a.classList.remove('selected')
    $sampleElems[sampleName].classList.add('selected');
    // Save to URL
    document.location.hash = sampleName;
  }

  // Load sample from URL if applicable
  {
    const hash = document.location.hash;
    const sampleName = hash.slice(1);  // Drop the leading '#'
    const isKnown = sampleName in $sampleElems
    if (isKnown) loadSample(sampleName);
  }

</script>

  </body>
</html>
